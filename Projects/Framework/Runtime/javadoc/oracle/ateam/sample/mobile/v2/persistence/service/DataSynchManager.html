<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_25) on Mon Feb 29 15:43:17 CET 2016 -->
<title>DataSynchManager</title>
<meta name="date" content="2016-02-29">
<link rel="stylesheet" type="text/css" href="../../../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="DataSynchManager";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":9,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10,"i14":10,"i15":10,"i16":10,"i17":10,"i18":10,"i19":10,"i20":10};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../../oracle/ateam/sample/mobile/v2/persistence/service/DataSynchAction.html" title="class in oracle.ateam.sample.mobile.v2.persistence.service"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../../../oracle/ateam/sample/mobile/v2/persistence/service/DataSynchPayload.html" title="class in oracle.ateam.sample.mobile.v2.persistence.service"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../../index.html?oracle/ateam/sample/mobile/v2/persistence/service/DataSynchManager.html" target="_top">Frames</a></li>
<li><a href="DataSynchManager.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#fields.inherited.from.class.oracle.ateam.sample.mobile.v2.persistence.model.ChangeEventSupportable">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">oracle.ateam.sample.mobile.v2.persistence.service</div>
<h2 title="Class DataSynchManager" class="title">Class DataSynchManager</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li><a href="../../../../../../../oracle/ateam/sample/mobile/v2/persistence/model/ChangeEventSupportable.html" title="class in oracle.ateam.sample.mobile.v2.persistence.model">oracle.ateam.sample.mobile.v2.persistence.model.ChangeEventSupportable</a></li>
<li>
<ul class="inheritance">
<li>oracle.ateam.sample.mobile.v2.persistence.service.DataSynchManager</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="typeNameLabel">DataSynchManager</span>
extends <a href="../../../../../../../oracle/ateam/sample/mobile/v2/persistence/model/ChangeEventSupportable.html" title="class in oracle.ateam.sample.mobile.v2.persistence.model">ChangeEventSupportable</a></pre>
<div class="block">Class that manages remote data synchronization actions 
 If a remote persistence manager is configured in persistence-mapping.xml for the given entity, and the create, update or remove
 operation on the remote persistence manager fails, for example because the device is offline or the remote server is not reachable,
 or the specific REST service is not running or the REST service call returns an error, then this failed remote transaction is registered
 as a pending data synchronization action in this manager.
 By calling the synchronize method in this class, a new attempt is made to synchronize the pending data synch actions.
 When the application is closed or abandoned, the pending data synch actions are persisted to a table in
 the SQLite database.
 This persistence is implemented in method saveSynchActionsToDB(). When a new instance of the DataSynchManager is created,
 the persisted data synch actions will be loaded again.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<ul class="blockList">
<li class="blockList"><a name="fields.inherited.from.class.oracle.ateam.sample.mobile.v2.persistence.model.ChangeEventSupportable">
<!--   -->
</a>
<h3>Fields inherited from class&nbsp;oracle.ateam.sample.mobile.v2.persistence.model.<a href="../../../../../../../oracle/ateam/sample/mobile/v2/persistence/model/ChangeEventSupportable.html" title="class in oracle.ateam.sample.mobile.v2.persistence.model">ChangeEventSupportable</a></h3>
<code><a href="../../../../../../../oracle/ateam/sample/mobile/v2/persistence/model/ChangeEventSupportable.html#propertyChangeSupport">propertyChangeSupport</a>, <a href="../../../../../../../oracle/ateam/sample/mobile/v2/persistence/model/ChangeEventSupportable.html#providerChangeSupport">providerChangeSupport</a></code></li>
</ul>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier</th>
<th class="colLast" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected </code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../oracle/ateam/sample/mobile/v2/persistence/service/DataSynchManager.html#DataSynchManager--">DataSynchManager</a></span>()</code>
<div class="block">Protected constructor, not private so subclases can be created to customize/extend the behavior</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../oracle/ateam/sample/mobile/v2/persistence/service/DataSynchManager.html#dataSynchFinished-java.util.List-java.util.List-">dataSynchFinished</a></span>(java.util.List&lt;<a href="../../../../../../../oracle/ateam/sample/mobile/v2/persistence/service/DataSynchAction.html" title="class in oracle.ateam.sample.mobile.v2.persistence.service">DataSynchAction</a>&gt;&nbsp;succeededDataSynchActions,
                 java.util.List&lt;<a href="../../../../../../../oracle/ateam/sample/mobile/v2/persistence/service/DataSynchAction.html" title="class in oracle.ateam.sample.mobile.v2.persistence.service">DataSynchAction</a>&gt;&nbsp;failedDataSynchActions)</code>
<div class="block">Callback method called by DataSynchronizer when dataSychronization action is done.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>protected <a href="../../../../../../../oracle/ateam/sample/mobile/v2/persistence/service/DataSynchPayload.html" title="class in oracle.ateam.sample.mobile.v2.persistence.service">DataSynchPayload</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../oracle/ateam/sample/mobile/v2/persistence/service/DataSynchManager.html#fromJSON-java.lang.String-">fromJSON</a></span>(java.lang.String&nbsp;json)</code>&nbsp;</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>java.util.List&lt;<a href="../../../../../../../oracle/ateam/sample/mobile/v2/persistence/service/DataSynchAction.html" title="class in oracle.ateam.sample.mobile.v2.persistence.service">DataSynchAction</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../oracle/ateam/sample/mobile/v2/persistence/service/DataSynchManager.html#getDataSynchActions--">getDataSynchActions</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>protected <a href="../../../../../../../oracle/ateam/sample/mobile/v2/persistence/service/DataSynchronizer.html" title="class in oracle.ateam.sample.mobile.v2.persistence.service">DataSynchronizer</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../oracle/ateam/sample/mobile/v2/persistence/service/DataSynchManager.html#getDataSynchronizer-oracle.ateam.sample.mobile.v2.persistence.service.DataSynchPayload-">getDataSynchronizer</a></span>(<a href="../../../../../../../oracle/ateam/sample/mobile/v2/persistence/service/DataSynchPayload.html" title="class in oracle.ateam.sample.mobile.v2.persistence.service">DataSynchPayload</a>&nbsp;payload)</code>
<div class="block">Get instance of DataSynchronizer.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>protected <a href="../../../../../../../oracle/ateam/sample/mobile/v2/persistence/manager/DBPersistenceManager.html" title="class in oracle.ateam.sample.mobile.v2.persistence.manager">DBPersistenceManager</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../oracle/ateam/sample/mobile/v2/persistence/service/DataSynchManager.html#getDBPersistenceManager--">getDBPersistenceManager</a></span>()</code>
<div class="block">Return instance of DBPersistenceManager that is used to read and write data sync actions to SQLite DB.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../oracle/ateam/sample/mobile/v2/persistence/service/DataSynchManager.html#getHasDataSynchActions--">getHasDataSynchActions</a></span>()</code>
<div class="block">Returns true when there are pending data synch actions</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>static <a href="../../../../../../../oracle/ateam/sample/mobile/v2/persistence/service/DataSynchManager.html" title="class in oracle.ateam.sample.mobile.v2.persistence.service">DataSynchManager</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../oracle/ateam/sample/mobile/v2/persistence/service/DataSynchManager.html#getInstance--">getInstance</a></span>()</code>
<div class="block">Create singleton instance of DataSynchManager.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../oracle/ateam/sample/mobile/v2/persistence/service/DataSynchManager.html#isDataSynchRunning--">isDataSynchRunning</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../oracle/ateam/sample/mobile/v2/persistence/service/DataSynchManager.html#loadSynchActionsFromDB--">loadSynchActionsFromDB</a></span>()</code>
<div class="block">Read all sync actions from SYNCH_ACTION DB table</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>protected boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../oracle/ateam/sample/mobile/v2/persistence/service/DataSynchManager.html#mergeWithExistingDataSyncActionIfNeeded-oracle.ateam.sample.mobile.v2.persistence.service.DataSynchAction-">mergeWithExistingDataSyncActionIfNeeded</a></span>(<a href="../../../../../../../oracle/ateam/sample/mobile/v2/persistence/service/DataSynchAction.html" title="class in oracle.ateam.sample.mobile.v2.persistence.service">DataSynchAction</a>&nbsp;synchAction)</code>
<div class="block">If a sync action for the same entity instance already exists, we merge the new sync action with
 the existing one.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../oracle/ateam/sample/mobile/v2/persistence/service/DataSynchManager.html#refreshDataSynchActionsList-java.util.List-">refreshDataSynchActionsList</a></span>(java.util.List&lt;<a href="../../../../../../../oracle/ateam/sample/mobile/v2/persistence/service/DataSynchAction.html" title="class in oracle.ateam.sample.mobile.v2.persistence.service">DataSynchAction</a>&gt;&nbsp;oldList)</code>
<div class="block">Send data change events so UI can refresh based on current number of pending data sync action</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../oracle/ateam/sample/mobile/v2/persistence/service/DataSynchManager.html#refreshHasDataSynchActions-boolean-">refreshHasDataSynchActions</a></span>(boolean&nbsp;oldValue)</code>
<div class="block">This method fires property change events when value of property hasDataSynchActions has changed.</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../oracle/ateam/sample/mobile/v2/persistence/service/DataSynchManager.html#registerDataSynchAction-oracle.ateam.sample.mobile.v2.persistence.service.DataSynchAction-">registerDataSynchAction</a></span>(<a href="../../../../../../../oracle/ateam/sample/mobile/v2/persistence/service/DataSynchAction.html" title="class in oracle.ateam.sample.mobile.v2.persistence.service">DataSynchAction</a>&nbsp;synchAction)</code>
<div class="block">Register remote data sync action.</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../oracle/ateam/sample/mobile/v2/persistence/service/DataSynchManager.html#removeDataSynchAction-oracle.ateam.sample.mobile.v2.persistence.service.DataSynchAction-">removeDataSynchAction</a></span>(<a href="../../../../../../../oracle/ateam/sample/mobile/v2/persistence/service/DataSynchAction.html" title="class in oracle.ateam.sample.mobile.v2.persistence.service">DataSynchAction</a>&nbsp;synchAction)</code>
<div class="block">Remove data synch action from the list and when last synch error is set, also remove from
 the local SQLite DB.</div>
</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../oracle/ateam/sample/mobile/v2/persistence/service/DataSynchManager.html#reportFailedTransaction-oracle.ateam.sample.mobile.v2.persistence.service.DataSynchAction-">reportFailedTransaction</a></span>(<a href="../../../../../../../oracle/ateam/sample/mobile/v2/persistence/service/DataSynchAction.html" title="class in oracle.ateam.sample.mobile.v2.persistence.service">DataSynchAction</a>&nbsp;dataSynchAction)</code>
<div class="block">This method is called by the framework under following conditions
 - user performs an action that triggers a transaction against a remote persistence manager
 - offline transactions are disabled (enableOfflineTransactions=false in persistence-mapping.xml)
 - the device is offline or the remote service call fails.</div>
</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../oracle/ateam/sample/mobile/v2/persistence/service/DataSynchManager.html#saveDataSynchAction-oracle.ateam.sample.mobile.v2.persistence.service.DataSynchAction-">saveDataSynchAction</a></span>(<a href="../../../../../../../oracle/ateam/sample/mobile/v2/persistence/service/DataSynchAction.html" title="class in oracle.ateam.sample.mobile.v2.persistence.service">DataSynchAction</a>&nbsp;synchAction)</code>
<div class="block">Save data synch action to local DB.</div>
</td>
</tr>
<tr id="i16" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../oracle/ateam/sample/mobile/v2/persistence/service/DataSynchManager.html#saveSynchActionsToDB--">saveSynchActionsToDB</a></span>()</code>
<div class="block">Write all sync actions to SYNCH_ACTION DB table</div>
</td>
</tr>
<tr id="i17" class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../oracle/ateam/sample/mobile/v2/persistence/service/DataSynchManager.html#setDataSynchRunning-boolean-">setDataSynchRunning</a></span>(boolean&nbsp;dataSynchRunning)</code>&nbsp;</td>
</tr>
<tr id="i18" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../oracle/ateam/sample/mobile/v2/persistence/service/DataSynchManager.html#synchronize-boolean-">synchronize</a></span>(boolean&nbsp;inBackground)</code>
<div class="block">Perform data synchronization using the DataSynchronizer class</div>
</td>
</tr>
<tr id="i19" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../oracle/ateam/sample/mobile/v2/persistence/service/DataSynchManager.html#synchronize-boolean-oracle.ateam.sample.mobile.v2.persistence.service.EntityCRUDService-">synchronize</a></span>(boolean&nbsp;inBackground,
           <a href="../../../../../../../oracle/ateam/sample/mobile/v2/persistence/service/EntityCRUDService.html" title="class in oracle.ateam.sample.mobile.v2.persistence.service">EntityCRUDService</a>&nbsp;callbackCrudService)</code>
<div class="block">Perform data synchronization using the DataSynchronizer class</div>
</td>
</tr>
<tr id="i20" class="altColor">
<td class="colFirst"><code>protected java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../oracle/ateam/sample/mobile/v2/persistence/service/DataSynchManager.html#toJSON-oracle.ateam.sample.mobile.v2.persistence.service.DataSynchPayload-">toJSON</a></span>(<a href="../../../../../../../oracle/ateam/sample/mobile/v2/persistence/service/DataSynchPayload.html" title="class in oracle.ateam.sample.mobile.v2.persistence.service">DataSynchPayload</a>&nbsp;payload)</code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.oracle.ateam.sample.mobile.v2.persistence.model.ChangeEventSupportable">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;oracle.ateam.sample.mobile.v2.persistence.model.<a href="../../../../../../../oracle/ateam/sample/mobile/v2/persistence/model/ChangeEventSupportable.html" title="class in oracle.ateam.sample.mobile.v2.persistence.model">ChangeEventSupportable</a></h3>
<code><a href="../../../../../../../oracle/ateam/sample/mobile/v2/persistence/model/ChangeEventSupportable.html#addPropertyChangeListener-oracle.adfmf.java.beans.PropertyChangeListener-">addPropertyChangeListener</a>, <a href="../../../../../../../oracle/ateam/sample/mobile/v2/persistence/model/ChangeEventSupportable.html#addProviderChangeListener-oracle.adfmf.java.beans.ProviderChangeListener-">addProviderChangeListener</a>, <a href="../../../../../../../oracle/ateam/sample/mobile/v2/persistence/model/ChangeEventSupportable.html#getPropertyChangeSupport--">getPropertyChangeSupport</a>, <a href="../../../../../../../oracle/ateam/sample/mobile/v2/persistence/model/ChangeEventSupportable.html#getProviderChangeSupport--">getProviderChangeSupport</a>, <a href="../../../../../../../oracle/ateam/sample/mobile/v2/persistence/model/ChangeEventSupportable.html#removePropertyChangeListener-oracle.adfmf.java.beans.PropertyChangeListener-">removePropertyChangeListener</a>, <a href="../../../../../../../oracle/ateam/sample/mobile/v2/persistence/model/ChangeEventSupportable.html#removeProviderChangeListener-oracle.adfmf.java.beans.ProviderChangeListener-">removeProviderChangeListener</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="DataSynchManager--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>DataSynchManager</h4>
<pre>protected&nbsp;DataSynchManager()</pre>
<div class="block">Protected constructor, not private so subclases can be created to customize/extend the behavior</div>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getInstance--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getInstance</h4>
<pre>public static&nbsp;<a href="../../../../../../../oracle/ateam/sample/mobile/v2/persistence/service/DataSynchManager.html" title="class in oracle.ateam.sample.mobile.v2.persistence.service">DataSynchManager</a>&nbsp;getInstance()</pre>
<div class="block">Create singleton instance of DataSynchManager.
 If you want to use your own subclass of DataSynchManager to extend/override the default behavior, then
 you can specify the fully qualified class name in mobile-persistence-config.properties using property
 datasync.manager.class</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
</dl>
</li>
</ul>
<a name="getDataSynchronizer-oracle.ateam.sample.mobile.v2.persistence.service.DataSynchPayload-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getDataSynchronizer</h4>
<pre>protected&nbsp;<a href="../../../../../../../oracle/ateam/sample/mobile/v2/persistence/service/DataSynchronizer.html" title="class in oracle.ateam.sample.mobile.v2.persistence.service">DataSynchronizer</a>&nbsp;getDataSynchronizer(<a href="../../../../../../../oracle/ateam/sample/mobile/v2/persistence/service/DataSynchPayload.html" title="class in oracle.ateam.sample.mobile.v2.persistence.service">DataSynchPayload</a>&nbsp;payload)</pre>
<div class="block">Get instance of DataSynchronizer.</div>
</li>
</ul>
<a name="synchronize-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>synchronize</h4>
<pre>public&nbsp;void&nbsp;synchronize(boolean&nbsp;inBackground)</pre>
<div class="block">Perform data synchronization using the DataSynchronizer class</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>inBackground</code> - </dd>
</dl>
</li>
</ul>
<a name="synchronize-boolean-oracle.ateam.sample.mobile.v2.persistence.service.EntityCRUDService-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>synchronize</h4>
<pre>public&nbsp;void&nbsp;synchronize(boolean&nbsp;inBackground,
                        <a href="../../../../../../../oracle/ateam/sample/mobile/v2/persistence/service/EntityCRUDService.html" title="class in oracle.ateam.sample.mobile.v2.persistence.service">EntityCRUDService</a>&nbsp;callbackCrudService)</pre>
<div class="block">Perform data synchronization using the DataSynchronizer class</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>inBackground</code> - </dd>
<dd><code>callbackCrudService</code> - the service to which the dataSynchFinished method call is propagated</dd>
</dl>
</li>
</ul>
<a name="toJSON-oracle.ateam.sample.mobile.v2.persistence.service.DataSynchPayload-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>toJSON</h4>
<pre>protected&nbsp;java.lang.String&nbsp;toJSON(<a href="../../../../../../../oracle/ateam/sample/mobile/v2/persistence/service/DataSynchPayload.html" title="class in oracle.ateam.sample.mobile.v2.persistence.service">DataSynchPayload</a>&nbsp;payload)</pre>
</li>
</ul>
<a name="fromJSON-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>fromJSON</h4>
<pre>protected&nbsp;<a href="../../../../../../../oracle/ateam/sample/mobile/v2/persistence/service/DataSynchPayload.html" title="class in oracle.ateam.sample.mobile.v2.persistence.service">DataSynchPayload</a>&nbsp;fromJSON(java.lang.String&nbsp;json)</pre>
</li>
</ul>
<a name="registerDataSynchAction-oracle.ateam.sample.mobile.v2.persistence.service.DataSynchAction-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>registerDataSynchAction</h4>
<pre>protected&nbsp;void&nbsp;registerDataSynchAction(<a href="../../../../../../../oracle/ateam/sample/mobile/v2/persistence/service/DataSynchAction.html" title="class in oracle.ateam.sample.mobile.v2.persistence.service">DataSynchAction</a>&nbsp;synchAction)</pre>
<div class="block">Register remote data sync action. If we are online and the sync action does not contain
 a "last sync error" then we do not save the sync action in the local SQLITE db yet, because it will
 be processed right away. If we are offline, or the data sync action contains a last sync error, then we also
 store it in SQLite DB when offline transactions are supported. With this approach we prevent creating a data
 sync row and subsequent removal of that same row in the normal scenario where we are online and the sync action
 is processed succesfully right away.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>synchAction</code> - </dd>
</dl>
</li>
</ul>
<a name="mergeWithExistingDataSyncActionIfNeeded-oracle.ateam.sample.mobile.v2.persistence.service.DataSynchAction-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>mergeWithExistingDataSyncActionIfNeeded</h4>
<pre>protected&nbsp;boolean&nbsp;mergeWithExistingDataSyncActionIfNeeded(<a href="../../../../../../../oracle/ateam/sample/mobile/v2/persistence/service/DataSynchAction.html" title="class in oracle.ateam.sample.mobile.v2.persistence.service">DataSynchAction</a>&nbsp;synchAction)</pre>
<div class="block">If a sync action for the same entity instance already exists, we merge the new sync action with
 the existing one. This saves a server roundtrip and is needed when the existing sync action is a
 create action where the server derives a new primary key. Then the second (update sync action)
 would fail because the primary key has changed, By merging the create and update sync actions into one action,
 we solve the problem of server-derived primary key change.
 If the existing sync action is a create action and the new sync action is a remove, we remove both sync actions.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>synchAction</code> - </dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>returns true when the new sync has been merged and does not need its own registration</dd>
</dl>
</li>
</ul>
<a name="saveDataSynchAction-oracle.ateam.sample.mobile.v2.persistence.service.DataSynchAction-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>saveDataSynchAction</h4>
<pre>protected&nbsp;void&nbsp;saveDataSynchAction(<a href="../../../../../../../oracle/ateam/sample/mobile/v2/persistence/service/DataSynchAction.html" title="class in oracle.ateam.sample.mobile.v2.persistence.service">DataSynchAction</a>&nbsp;synchAction)</pre>
<div class="block">Save data synch action to local DB. We do a merge action because the row might already exist
 if the sync action has failed multiple times.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>synchAction</code> - </dd>
</dl>
</li>
</ul>
<a name="getDBPersistenceManager--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getDBPersistenceManager</h4>
<pre>protected&nbsp;<a href="../../../../../../../oracle/ateam/sample/mobile/v2/persistence/manager/DBPersistenceManager.html" title="class in oracle.ateam.sample.mobile.v2.persistence.manager">DBPersistenceManager</a>&nbsp;getDBPersistenceManager()</pre>
<div class="block">Return instance of DBPersistenceManager that is used to read and write data sync actions to SQLite DB.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
</dl>
</li>
</ul>
<a name="refreshDataSynchActionsList-java.util.List-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>refreshDataSynchActionsList</h4>
<pre>protected&nbsp;void&nbsp;refreshDataSynchActionsList(java.util.List&lt;<a href="../../../../../../../oracle/ateam/sample/mobile/v2/persistence/service/DataSynchAction.html" title="class in oracle.ateam.sample.mobile.v2.persistence.service">DataSynchAction</a>&gt;&nbsp;oldList)</pre>
<div class="block">Send data change events so UI can refresh based on current number of pending data sync action</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>oldList</code> - </dd>
</dl>
</li>
</ul>
<a name="refreshHasDataSynchActions-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>refreshHasDataSynchActions</h4>
<pre>protected&nbsp;void&nbsp;refreshHasDataSynchActions(boolean&nbsp;oldValue)</pre>
<div class="block">This method fires property change events when value of property hasDataSynchActions has changed.
 It also sets the current number of data sync actions in an applicationScope variable named
 ampa_DataSyncActionsCount, and it sets the boolean applicationScope variable named ampa_hasDataSyncActions
 This applicationScope variable can be used by the UI to show a badge on a UI widget to show the 
 current number of pending data sync actions.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>oldValue</code> - </dd>
</dl>
</li>
</ul>
<a name="setDataSynchRunning-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setDataSynchRunning</h4>
<pre>protected&nbsp;void&nbsp;setDataSynchRunning(boolean&nbsp;dataSynchRunning)</pre>
</li>
</ul>
<a name="isDataSynchRunning--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isDataSynchRunning</h4>
<pre>public&nbsp;boolean&nbsp;isDataSynchRunning()</pre>
</li>
</ul>
<a name="getDataSynchActions--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getDataSynchActions</h4>
<pre>public&nbsp;java.util.List&lt;<a href="../../../../../../../oracle/ateam/sample/mobile/v2/persistence/service/DataSynchAction.html" title="class in oracle.ateam.sample.mobile.v2.persistence.service">DataSynchAction</a>&gt;&nbsp;getDataSynchActions()</pre>
</li>
</ul>
<a name="removeDataSynchAction-oracle.ateam.sample.mobile.v2.persistence.service.DataSynchAction-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>removeDataSynchAction</h4>
<pre>public&nbsp;void&nbsp;removeDataSynchAction(<a href="../../../../../../../oracle/ateam/sample/mobile/v2/persistence/service/DataSynchAction.html" title="class in oracle.ateam.sample.mobile.v2.persistence.service">DataSynchAction</a>&nbsp;synchAction)</pre>
<div class="block">Remove data synch action from the list and when last synch error is set, also remove from
 the local SQLite DB. This method is called from reusable DataSynch Feature and from DataSynchronizer
 when sync action is processed succesfully.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>synchAction</code> - </dd>
</dl>
</li>
</ul>
<a name="saveSynchActionsToDB--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>saveSynchActionsToDB</h4>
<pre>public&nbsp;void&nbsp;saveSynchActionsToDB()</pre>
<div class="block">Write all sync actions to SYNCH_ACTION DB table</div>
</li>
</ul>
<a name="loadSynchActionsFromDB--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>loadSynchActionsFromDB</h4>
<pre>public&nbsp;void&nbsp;loadSynchActionsFromDB()</pre>
<div class="block">Read all sync actions from SYNCH_ACTION DB table</div>
</li>
</ul>
<a name="getHasDataSynchActions--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getHasDataSynchActions</h4>
<pre>public&nbsp;boolean&nbsp;getHasDataSynchActions()</pre>
<div class="block">Returns true when there are pending data synch actions</div>
</li>
</ul>
<a name="dataSynchFinished-java.util.List-java.util.List-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>dataSynchFinished</h4>
<pre>protected&nbsp;void&nbsp;dataSynchFinished(java.util.List&lt;<a href="../../../../../../../oracle/ateam/sample/mobile/v2/persistence/service/DataSynchAction.html" title="class in oracle.ateam.sample.mobile.v2.persistence.service">DataSynchAction</a>&gt;&nbsp;succeededDataSynchActions,
                                 java.util.List&lt;<a href="../../../../../../../oracle/ateam/sample/mobile/v2/persistence/service/DataSynchAction.html" title="class in oracle.ateam.sample.mobile.v2.persistence.service">DataSynchAction</a>&gt;&nbsp;failedDataSynchActions)</pre>
<div class="block">Callback method called by DataSynchronizer when dataSychronization action is done. It contains a list of succeeded
 and failed data sync actions. You can override this method to add custom logic after data synchronization has taken place.
 For example, you could warn the end user that one or more transactions have failed and will be re-tried later, or you can
 inform them that all pending data sync actions have been processed successfully.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>succeededDataSynchActions</code> - </dd>
<dd><code>failedDataSynchActions</code> - </dd>
</dl>
</li>
</ul>
<a name="reportFailedTransaction-oracle.ateam.sample.mobile.v2.persistence.service.DataSynchAction-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>reportFailedTransaction</h4>
<pre>protected&nbsp;void&nbsp;reportFailedTransaction(<a href="../../../../../../../oracle/ateam/sample/mobile/v2/persistence/service/DataSynchAction.html" title="class in oracle.ateam.sample.mobile.v2.persistence.service">DataSynchAction</a>&nbsp;dataSynchAction)</pre>
<div class="block">This method is called by the framework under following conditions
 - user performs an action that triggers a transaction against a remote persistence manager
 - offline transactions are disabled (enableOfflineTransactions=false in persistence-mapping.xml)
 - the device is offline or the remote service call fails.
 This method will take the error message recorded against the data sync action and present it to the
 end user.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>dataSynchAction</code> - </dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../../oracle/ateam/sample/mobile/v2/persistence/service/DataSynchAction.html" title="class in oracle.ateam.sample.mobile.v2.persistence.service"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../../../oracle/ateam/sample/mobile/v2/persistence/service/DataSynchPayload.html" title="class in oracle.ateam.sample.mobile.v2.persistence.service"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../../index.html?oracle/ateam/sample/mobile/v2/persistence/service/DataSynchManager.html" target="_top">Frames</a></li>
<li><a href="DataSynchManager.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#fields.inherited.from.class.oracle.ateam.sample.mobile.v2.persistence.model.ChangeEventSupportable">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
